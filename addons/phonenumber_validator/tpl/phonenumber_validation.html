<!--%import("js/validation.js")-->
<script>/* vi:set ts=4 sw=4 expandtab enc=utf8: */</script>
<div class="title">{$lang->cmd_input_phone_number}</div>

<form id="fo_phonenum_valid" method="get">
    <div id="popBody">
        <table cellspacing="0" class="rowTable">
        <tr>
            <th scope="col"><div>{$lang->cellphone_number}</div></th>
            <td>
                <!--@if($global=='Y')-->
                <!--#include("global.html")-->
                <!--@end-->
                <input type="text" id="cellphone_number1" name="cellphone_number1" size="4" maxlength="4" value="" class="inputTypeText" />
                <input type="text" id="cellphone_number2" name="cellphone_number2" size="4" maxlength="4" value="" class="inputTypeText" />
                <input type="text" id="cellphone_number3" name="cellphone_number3" size="4" maxlength="4" value="" class="inputTypeText" />
                <p>{$lang->desc_input_phone_number}</p>
            </td>
        </tr>
        </table>
    </div>
    <div id="popFooter">
        <span class="button black strong"><input type="submit" value="{$lang->cmd_receive_validation_code}" /></span>
    </div>
    <input type="hidden" name="module" value="{$module}">
    <input type="hidden" name="act" value="{$act}">
    <input type="hidden" name="authcode" value="{$authcode}">
</form>
<!--%import("js/data.js")-->
<script>
    // alert
    <!--@if($alert_message)-->alert("{$alert_message}");<!--@end-->

    // getting default country code
    setTimeout(function() {
        var countrycode = window.opener.document.getElementsByName("{$countrycode_fieldname}");
        if (countrycode.length > 0) {
            // country
            jQuery('#nation option[code=' + countrycode[0].value +']').attr('selected', true);
            // continent
            var continent = jQuery('#nation option[code=' + countrycode[0].value +']').attr('continent');
            jQuery('#continent option[value=' + continent + ']').attr('selected', true);
            // set value
            jQuery('#country_code').val(countrycode[0].value);
        }
    }, 500);

    // getting input values
    var cn1 = document.getElementById("cellphone_number1");
    var cn2 = document.getElementById("cellphone_number2");
    var cn3 = document.getElementById("cellphone_number3");

    var phonenum_arr = window.opener.document.getElementsByName("{$phonenumber_fieldname}");
    if (phonenum_arr.length < 3)
    {
        alert("{$lang->alert_check_cellphone_fieldname}");
    }
    else
    {
        cn1.value = phonenum_arr[0].value;
        cn2.value = phonenum_arr[1].value;
        cn3.value = phonenum_arr[2].value;
    }

    cn1.focus();

/*
// for test
(function($) {
    jQuery(function($) {

    // set country code
    countrycode = '1';
    objs = window.opener.document.getElementsByName("{$countrycode_fieldname}");
    objs[0].value = countrycode;

    // set flag
    obj = window.opener.document.getElementById("phoneNumberValidatorFlag");
    alert(jQuery('body').data('82'));
    jQuery(obj).text(jQuery('body').data(countrycode) + '(' + countrycode + ')');
    });
}) (jQuery);
*/


</script>
